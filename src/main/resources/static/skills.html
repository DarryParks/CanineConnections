<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Dog SKills</title>

    <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      text-align: center;
    }
    .checkbox-group {
      margin-bottom: 20px;
    }
    .checkbox-group label {
      display: block;
      margin-bottom: 5px;
    }
    .dog-list {
      list-style: none;
      padding: 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .dog-item {
      margin: 10px;
      text-align: center;
      cursor: pointer;
    }
    .dog-item img {
      width: 200px;
      height: auto;
      margin-bottom: 10px;
    }

    .dog-details {
      display: none;
      padding: 10px;
      border: 1px solid #ccc;
      margin-top: 10px;
      }

        .dog-card {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 10px;
        }

  </style>

</head>

<div class="navbar">
    <a href="index.html">Home</a>
    <a href="dog.html">Dog Breeds</a>
    <a href="skills.html">Find Dogs By Skills And Temperament</a>
    <a href="dogInformation.html">Submit And Add Information About Dogs</a>
    <a href="resources.html">Resources</a>
    <a href="contacts.html">Contacts</a>
</div>

<body>
<h1>Find Dogs By Skills And Temperament</h1>

<div class="checkbox-group">
    <label><input type="checkbox" value="loyal"> Loyal</label>
    <label><input type="checkbox" value="intelligent"> Intelligent</label>
    <label><input type="checkbox" value="active"> Active</label>
</div>

<div class="checkbox-group">
    <label><input type="checkbox" value="friendly"> Friendly</label>
    <label><input type="checkbox" value="playful"> Playful</label>
    <label><input type="checkbox" value="energetic"> Energetic</label>
</div>

<div class="checkbox-group">
    <label><input type="checkbox" value="calm"> Calm</label>
    <label><input type="checkbox" value="alert"> Alert</label>
    <label><input type="checkbox" value="confident"> Confident</label>
</div>

<ul id="dog-list" class="dog-list"></ul>

<div id="dog-details" class="dog-details"></div>

<script>
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    const dogListElement = document.getElementById('dog-list');
    const dogDetailsElement = document.getElementById('dog-details');


    fetch('/api/skills')
  .then(response => response.json())
  .then(skills => {
    displaySkills(skills);
  })
  .catch(error => {
    console.error('Error:', error);
  });

// Function to display the skills
function displaySkills(skills) {
  skills.forEach(skill => {
    const skillButton = createSkillButton(skill);
    dogsContainer.appendChild(skillButton);
  });
}

// Function to create a skill button element
function createSkillButton(skill) {
  const skillButton = document.createElement('button');
  skillButton.textContent = skill.name;
  skillButton.addEventListener('click', () => {
    fetchDogsBySkill(skill.id);
  });
  return skillButton;
}

// Function to fetch dogs by skill
function fetchDogsBySkill(skillId) {
  fetch(`/api/skills/${skillId}`)
    .then(response => response.json())
    .then(skill => {
      const dogs = skill.dogs;
      displayDogs(dogs);
    })
    .catch(error => {
      console.error('Error:', error);
    });
}

// Function to display the dogs
function displayDogs(dogs) {
  dogsContainer.innerHTML = '';

  dogs.forEach(dog => {
    const dogCard = createDogCard(dog);
    dogsContainer.appendChild(dogCard);
  });
}

    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        generateDogBreeds();
      });
    });

    function generateDogBreeds() {
      // Get the selected skills, traits, and temperament
      const selectedSkills = getSelectedValues('input[value^="skill"]');
      const selectedTraits = getSelectedValues('input[value^="trait"]');
      const selectedTemperaments = getSelectedValues('input[value^="temperament"]');


      dogListElement.innerHTML = '';
      dogDetailsElement.innerHTML = '';

      // Fetch dog breeds from the API
      fetch('https://api.thedogapi.com/v1/breeds')
        .then(response => response.json())
        .then(dogBreeds => {
          // Filter dog breeds based on the selected skills, traits, and temperament
          const filteredDogBreeds = dogBreeds.filter(dogBreed => {
            const dogSkills = dogBreed.skills || [];
            const dogTraits = dogBreed.traits || [];
            const dogTemperament = dogBreed.temperament || [];

            // Check if the dog breed has all the selected skills, traits, and temperament
            return (
              selectedSkills.every(skill => dogSkills.includes(skill)) &&
              selectedTraits.every(trait => dogTraits.includes(trait)) &&
              selectedTemperaments.every(temp => dogTemperament.includes(temp))
            );
          });

          // Display dog breeds
          if (filteredDogBreeds.length === 0) {
            dogListElement.textContent = 'No dog breeds found with the specified skills, traits, and temperament.';
            return;
          }

          filteredDogBreeds.forEach(dogBreed => {
            const dogItem = document.createElement('li');
            dogItem.className = 'dog-item';

            const image = document.createElement('img');
            image.src = dogBreed.image.url;
            image.alt = 'Dog Breed Image';
            dogItem.appendChild(image);

            const name = document.createElement('p');
            name.textContent = `Breed: ${dogBreed.name}`;
            dogItem.appendChild(name);

            dogItem.addEventListener('click', () => {
              showDogDetails(dogBreed);
            });

            dogListElement.appendChild(dogItem);
          });
        })
        .catch(error => {
          console.error('Error:', error);
        });
    }

    function showDogDetails(dogBreed) {
      // Clear previous dog details
      dogDetailsElement.innerHTML = '';

      const details = document.createElement('div');
      details.innerHTML = `
        <h2>${dogBreed.name}</h2>
        <p>Origin: ${dogBreed.origin}</p>
        <p>Life Span: ${dogBreed.life_span}</p>
        <p>Bred For: ${dogBreed.bred_for}</p>
        <p>Temperament: ${dogBreed.temperament.join(', ')}</p>
        <p>Height: ${dogBreed.height.metric} cm</p>
        <p>Weight: ${dogBreed.weight.metric} kg</p>
      `;

      dogDetailsElement.appendChild(details);
    }

    function getSelectedValues(selector) {
      const selectedValues = [];
      document.querySelectorAll(selector).forEach(checkbox => {
        if (checkbox.checked) {
          selectedValues.push(checkbox.value);
        }
      });
      return selectedValues;
    }
  </script>
</body>
</html>





